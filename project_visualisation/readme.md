# Проект Визуализация. Практика визуализации данных

## Оглавление

* [1. Описание проекта](https://github.com/SerG8S/sf_data_science/blob/main/project_visualisation/readme.md#Описание-проекта)
* [2. Какой кейс решаем?](https://github.com/SerG8S/sf_data_science/blob/main/project_visualisation/readme.md#Какой-кейс-решаем)
* [3. Краткая информация о данных](https://github.com/SerG8S/sf_data_science/blob/main/project_visualisation/readme.md#Краткая-информация-о-данных)
* [4. Этапы работы над проектом](https://github.com/SerG8S/sf_data_science/blob/main/project_visualisation/readme.md#Этапы-работы-над-проектом)
* [5. Результат](https://github.com/SerG8S/sf_data_science/blob/main/project_visualisation/readme.md#Результат)
* [6. Выводы](https://github.com/SerG8S/sf_data_science/blob/main/project_visualisation/readme.md#Выводы)

## Описание проекта

Банк обращается к вам за помощью: он хочет разработать кампанию лояльности по удержанию клиентов, но для этого ему необходимо, чтобы вы выяснили основные причины оттока клиентов. 
Иными словами, нужно установить, чем ушедшие клиенты отличаются от лояльных и как между собой связаны различные признаки, определяющие клиентов.

После разведывательного анализа, с целью выявления наиболее важных признаков оттока, банк сможет построить модель машинного обучения, которая будет прогнозировать уход клиента.

## Какой кейс решаем?

Вам предстоит подготовить мини-отчёт о проделанной работе в виде ноутбука. 
Отчёт должен содержать ответы на приведённые ниже вопросы в виде графика и подробных выводов, которые вы можете сделать, исходя из него.

**Условия соревнования:**

В файле должно содержаться 10 графиков — 10 ответов к заданиям.

**Метрика качества**

Каждый график и преобразования к нему выполняются в отдельной ячейке.

Под графиком вы должны предоставить свой ответ на вопрос по нему и, если это требуется, выводы, которые вы можете сделать, исходя из графика.

**Что практикуем**

- Исскуство визуализации, можно использовать любую из изученных библиотек (Pandas, Matplotlib, Seaborn, Plotly).
- Перед выполнением задания обязательно подумайте, какие признаки в данных являются числовыми, а какие — категориальными.
- При выполнении заданий обязательно придерживайтесь критериев правильной визуализации.

### Краткая информация о данных

Столбцы таблицы:

- RowNumber — номер строки таблицы (это лишняя информация, поэтому можете сразу от неё избавиться)
- CustomerId — идентификатор клиента
- Surname — фамилия клиента
- CreditScore — кредитный рейтинг клиента (чем он выше, тем больше клиент брал кредитов и возвращал их)
- Geography — страна клиента (банк международный)
- Gender — пол клиента
- Age — возраст клиента
- Tenure — сколько лет клиент пользуется услугами банка
- Balance — баланс на счетах клиента в банке
- NumOfProducts — количество услуг банка, которые приобрёл клиент
- HasCrCard — есть ли у клиента кредитная карта (1 — да, 0 — нет)
- IsActiveMember — есть ли у клиента статус активного клиента банка (1 — да, 0 — нет)
- EstimatedSalary — предполагаемая заработная плата клиента
- Exited — статус лояльности (1 — ушедший клиент, 0 — лояльный клиент)

### Этапы работы над проектом

1. Выполнил импорт необходимых библиотек для работы:
   1. Pandas;
   2. Matplotlib;
   3. Seaborn;
   4. Plotly.
2. Загрузил дата фрейм:
- ['churn.csv'](https://cloud.mail.ru/public/YAqu/WRkWEJZmm)
3. Выполнил предобработку данных:
   1. Удалил незадействованные столбцы:
      1. RowNumber — номер строки таблицы;
      2. CustomerId — идентификатор клиента;
      3. Surname — фамилия клиента.
4. Узучив представленный дата фрейм можно сказать по описанию признаков, что они относятся к категориальному типу данных. Под категориальными признаками обычно подразумевают столбцы в таблице, которые обозначают принадлежность объекта к какому-то классу/категории. Чаще всего представлены в виде текстового описания и кодируются в Pandas типом данных object: Geography, Gender. Однако это не всегда так. 
Например, загруженные нами ранее признаки: NumOfProducts, HasCrCard, IsActiveMember, Exited кодируется числом (int64), но на самом деле является категориальным, поскольку диапазон их значений ограничен и каждому числу мы можем поставить соответствующее значение. Поэтому признаки могут быть разделены:
- Номинальные (Geography, Gender);
- Порядковыми (NumOfProducts, HasCrCard, IsActiveMember, Exited), а также они являются бинарными, поэтому их можно преобразовать в текстовую информацию (object).
Также разделил данные на два признака по столбцу статус лояльности (1 — ушедший клиент, 0 — лояльный клиент), заменив текстовой информацией типа(object).
5. Выполнил предобработку данных:
   1. Разделение клиентов по статусу лояльности (ratio_df).
   2. Отфильтрованные клиенты из-за баланса в соответствии с условием более 2.5 тысячь $(balance).
   3. Ввиду большого количества лояльных клиентов, но с нулевым балансом(balance_not_null).
   4. Клиенты с нулевым балансом(balance_null).
   5. 
6. Изучил доступные средства визуализации в среде разработки Jupyter Notebook и согласно правилам визуализации выполнил задание по построению графиков на основе дата фрейма:
- 1. Первое и самое главное правило — график должен быть информативным и понятным. То есть любой человек, взглянув на ваш график, должен понять, что на нём изображено. Для этого всегда подписывайте оси графика или сам график, делайте интервалы между отметками на осях, не используйте слишком много графиков на одной координатной плоскости.
- 2. Одна плоскость — один вид графика. Не стоит смешивать типы визуализации, это делает результат нечитабельным.
- 3. Принцип минимализма: чем проще график, тем лучше — не нужно добавлять сглаживающие кривые, многочисленные подписи, лишние отметки на осях, яркие, отвлекающие внимание цвета, если это не помогает вам донести идею.
- 4. Если тип значений всего один, легенда не нужна.
- 5. Не используйте сложный дизайн там, где это не требуется. Прежде чем строить для презентации 3D-график, подумайте, можно ли обойтись без него.
- 6. Если у вас несколько диаграмм, используйте единую цветовую гамму.
- 7. Время всегда указывается по горизонтальной оси слева направо. Размещайте отметки времени так, чтобы они не сливались друг с другом (например, под углом 45 градусов).
- 8. При построении графиков необходимо отталкиваться от их предназначения: например, не надо строить линейный график на категориальных данных — он не предназначен для этого.
- Наконец, в завершение темы визуализации предлагаем вам ознакомиться со схемой, на которую вы можете ориентироваться при выборе типа визуализации для своих реальных задач:
-![Иллюстрация к проекту](https://github.com/SerG8S/sf_data_science/blob/main/project_visualisation/diagrams.png)
7. Опираясь на список вопросов от банка, ответил на вопросы ввиде графиков, представлены в проекте ноутбука и выводов к ним:
- 1. Каково соотношение ушедших и лояльных клиентов? Покажите это на графике и дайте комментарий по соотношению.
![Иллюстрация к проекту](https://github.com/SerG8S/sf_data_science/blob/main/project_visualisation/ratio.png)
- Количество лояльных клиентов практически в 4 раза больше, чем ушедших. Позитивный показатель, который говорит об отсутсвии массового оттока клиентов, не более 20%.
- 2. Постройте график, показывающий распределение баланса пользователей, у которых на счету больше 2 500 долларов. Опишите распределение и сделайте выводы.
![Иллюстрация к проекту](https://github.com/SerG8S/sf_data_science/blob/main/project_visualisation/balance.png)
- Основная часть пользователей сосредоточена в интервале от 50 до 200 тысяч, а наибольшее число клиентов сосредоточено в интервале от 100 до 140 тысяч. Самый высокий прямоугольник расположен в отметке баланса равной 120 тысячам - медианное значение. Далее при увеличении баланса количество пользователей только падает, что говорит нам о том, что в банке обслуживается преимущественно клиенты среднего класса, ввиду наличия одного вклада более 250 тысяч и незначительного количества клиентов с балансом более 200 тысяч, но менее 250 тысяч. Соответственно при разработке программы лояльности, необходимо учитывать чувствительность клиентов к ценовым предложениям по обслуживанию счета и программе лояльности, в основном сосредоточенной в среднем ценовом сегменте. По графику можно отметить, что распределение близко к нормальному.
- 3. Посмотрите на распределение баланса клиента в разрезе признака оттока. Как различаются суммы на накопительном счёте ушедших и лояльных клиентов? Подумайте и напишите, с чем это может быть связано, что может не устраивать ушедших клиентов в банке.
- 4. Посмотрите на распределение возраста в разрезе признака оттока. В какой группе больше потенциальных выбросов? На какую возрастную категорию клиентов стоит обратить внимание банку?
- 5. Постройте график, который показывает взаимосвязь кредитного рейтинга клиента и его предполагаемой зарплаты. Добавьте расцветку по признаку оттока клиентов. Какова взаимосвязь между признаками? Если не видите явной взаимосвязи, укажите это.
- 6. Кто чаще уходит, мужчины или женщины? Постройте график, который иллюстрирует это.
- 7. Как отток клиентов зависит от числа приобретённых у банка услуг? Для ответа на этот вопрос постройте многоуровневую столбчатую диаграмму.
- 8. Как влияет наличие статуса активного клиента на отток клиентов? Постройте диаграмму, иллюстрирующую это. Что бы вы предложили банку, чтобы уменьшить отток клиентов среди неактивных?
- 9. В какой стране доля ушедших клиентов больше? Постройте тепловую картограмму, которая покажет это соотношение на карте мира. Предположите, с чем это может быть связано.
- 10. Переведите числовой признак CreditScore в категориальный. Для этого воспользуйтесь функцией get_credit_score_cat(), которая приведена ниже. Примените её к столбцу CreditScore и создайте новый признак CreditScoreCat — категории кредитного рейтинга.
6. Написал программу для обработки данных и построения графиков:
[project_visualisation.ipynb](https://github.com/SerG8S/sf_data_science/blob/main/project_visualisation/project_visualisation.ipynb) - проект ноутбука с графиками.
7. Ответил на вопросы ввиде графиков, представлены в проекте ноутбука и выводов к ним:
- 3. Ввиду большого количества лояльных клиентов, но с нулевым балансом. Это те, кто открыл счет, но не пополнил его, получается достаточно большое количество клиентов до 2,8 тысячи человек. Необходимо провести фильтрацию данных убрав пользователей с нулевым балансом до 3,5 тысячи человек, для проведения дальнейшего анализа данных. Стоит отдельно рассмотреть клиентов с нулевым балансом.
- ![Иллюстрация к проекту](https://github.com/SerG8S/sf_data_science/blob/main/project_visualisation/balance_gist.png)
- - ![Иллюстрация к проекту](https://github.com/SerG8S/sf_data_science/blob/main/project_visualisation/balance_boxplot.png)
Суммарное количество лояльных пользователей превышает количество ушедших в 2.5 раза, позитивная динамика. Также большое количество лояльных пользователей на сумме баланса которых от 49 тысяч USD до 180 тысяч USD, более 500 человек с медианным балансом в 120 тысяч USD. Учитывая разницу в количестве клиентов, можно сказать, что услугами банка пользовались как дополнительными, при этом имея основной счет в другом банке на более выгодных условиях или используя преимущественно наличные деньги.
- 4. Посмотрите на распределение возраста в разрезе признака оттока. В какой группе больше потенциальных выбросов? На какую возрастную категорию клиентов стоит обратить внимание банку?
- 5. Постройте график, который показывает взаимосвязь кредитного рейтинга клиента и его предполагаемой зарплаты. Добавьте расцветку по признаку оттока клиентов. Какова взаимосвязь между признаками? Если не видите явной взаимосвязи, укажите это.
- 6. Разница небольшая, но женщины уходят чаще, чем мужчины.
- 7. Из диаграммы видно, что при наличии 3-х и более услуг у клиента, статус нелояльности к банку увеличивается и превалирует над лояльными клиентами. В категории клиентов, у которых 2-е услуги лояльных больше на 13,4%, чем в категории клиентов, у которых одна услуга, при этом существенное падение на 98,92% в категории 3-х услуг, и на 100% в категории 4-х услуг соответственно. Что говорит о низкой привлекательности банка как экосистемы продуктов, ввиду популярности использования 1-ой или 2-мя услугами из продуктовой линейки банка. Суммарное количество клиентов с одной услугой больше на 9,72% клиентов, чем с двумя услугами банка, но при этом количество не лояльных клиентов значительно больше на 75,3%. Тем самым получается, что самая привлекательная категория клиентов у банка, те кто пользуется двумя услугами, так как самый высокий процент лояльности в аудитории. Необходима программа по увеличению лояльности среди клиентов с одной услугой, для удержания клиентов в банке. И проработка дополнительных услуг, которые не являются привлекательными для аудитории.
- 8. Активных клиентов на 5,86% больше, чем не активных, получается что деление просходит примерно пополам. При этом активных, но не лояльных клиентов меньше на 43,54%, чем в категории не активных клиентов, что говорит нам о 83,35% лояльных и активных клиентах, остаток клиентов не является лояльным к банку. Неактивных, но лояльных клиентов в банке 63,3%, остальные не являются активными и лояльными. В группе клиентов, которая не является активной, но при этом лояльна необходимо выявить спект услуг, неиспользуемый клиентом или успользуемый в другом учереждении для привлечения.
- 9. Из полученного распределения видно, что самая большая доля ушедших клиентов из Германии, примерно половина всех ушедших, вполне возможно отток клиентов связан с изменением условий обслуживания на территории страны.
- 10. Чаще всего — это клиенты с низким рейтингом, которые только начали пользоваться услугами, но по каким-то причинам не понравилось или доверие которых банк не заполучил. По тепловой карте видно, что чем выше категория клиентов, тем меньше потерь среди клиентов, но при этом высокое количество в категории "Превосходно". Так же можно обратить внимание на область использования услугами до 7-ми лет, преобладает холодный оттенок, что говорит о низком оттоке клиентов. В последующем происходит увеличение оттока клиентов, что требует разработки программы лояльности для клиентов с длительным сроком обслуживания.

### Результат

Написана программа по визуализации базы данных об оттоке клиентов банка и получено представление о собранных и обработанных данных.

### Выводы

В процессе написания программы приобретены навыки работы с необходимыми средствами обработки и визуализации для Data Science.
